<form nz-form [formGroup]="requestForm" (ngSubmit)="submitForm()">

  <div nz-row>
    <div nz-col nzSpan="14">

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="lenderName">Lender Name</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzHasFeedback nzErrorTip="This field is required">
          <input nz-input formControlName="lenderName" id="lenderName" placeholder="please enter lender's name" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24">Website</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzHasFeedback nzErrorTip="This field has an error">
          <input nz-input formControlName="website" placeholder="please enter website url" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="email">E-mail</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzHasFeedback nzErrorTip="The input is not valid E-mail!">
          <input nz-input formControlName="emailAddress" id="email" placeholder="Enter email address" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="7" [nzXs]="24" nzFor="phoneNumber" nzTooltipTitle="With International Code">
          Phone Number
        </nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzHasFeedback nzErrorTip="Not a valid phone number!">
          <input nz-input id="phoneNumber" formControlName="phoneNumber" placeholder="Enter phone number" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="city">City (Optional)</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzHasFeedback nzErrorTip="Please input value!">
          <input nz-input id="city" formControlName="city" placeholder="Enter city" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="countryId">Country</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzHasFeedback nzErrorTip="The input is not valid E-mail!">
          <nz-select nzShowSearch nzAllowClear formControlName="countryId" id="countryId"
            nzPlaceHolder="Select A Country" (change)="changeCountry($event)">
            <nz-option *ngFor="let item of countryList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="stateId">State</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzHasFeedback nzErrorTip="The input is not valid E-mail!">
          <nz-select nzShowSearch nzAllowClear formControlName="stateId" id="stateId"
            nzPlaceHolder="Select State/Region">
            <nz-option *ngFor="let item of stateList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="7" [nzXs]="24" nzRequired nzTooltipTitle="Minimum Loan Amount">Min Amount</nz-form-label>
        <nz-form-control [nzSm]="13" [nzXs]="24" nzHasFeedback nzErrorTip="This field has an error">
          <nz-input-number-group nzAddOnBefore="{{selectedCountry?.currencyCode}}" style="width: 100%">
            <nz-input-number [nzStep]="500" formControlName="minimumLoanAmount" placeholder="0.00"></nz-input-number>
          </nz-input-number-group>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="7" [nzXs]="24" nzRequired nzTooltipTitle="Maximum Loan Amount">Max Amount</nz-form-label>
        <nz-form-control [nzSm]="13" [nzXs]="24" nzHasFeedback nzErrorTip="This field has an error">
          <nz-input-number-group nzAddOnBefore="{{selectedCountry?.currencyCode}}" style="width: 100%">
            <nz-input-number [nzStep]="500" formControlName="maximumLoanAmount" placeholder="0.00"></nz-input-number>
          </nz-input-number-group>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="8" [nzXs]="24" nzTooltipTitle="Turn Around Time (In Minutes)">TAT (In Minutes)
        </nz-form-label>
        <nz-form-control [nzSm]="13" [nzXs]="24" nzHasFeedback nzErrorTip="This field has an error">
          <nz-input-number-group nzAddOnAfter="Minute(s)" style="width: 100%">
            <nz-input-number [nzStep]="5" formControlName="turnAroundTimeInMinute"></nz-input-number>
          </nz-input-number-group>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="7" [nzXs]="24">Has Web App</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <nz-switch formControlName="hasWebApp"></nz-switch>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="7" [nzXs]="24">Has Mobile App</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <nz-switch formControlName="hasMobileApp"></nz-switch>
        </nz-form-control>
      </nz-form-item>

    </div>

    <div nz-col nzSpan="10">
      <nz-form-item>
        <nz-upload class="avatar-uploader" nzName="avatar" nzListType="picture-card" nzAccept="image/*" [nzShowUploadList]="false"
          [nzBeforeUpload]="beforeUpload" (nzChange)="handleChange($event)">
          <ng-container *ngIf="!logoUrl">
            <span class="upload-icon" nz-icon [nzType]="loading ? 'loading' : 'plus'"></span>
            <div class="ant-upload-text">Upload Logo</div>
          </ng-container>
          <img *ngIf="logoUrl" [src]="logoUrl" style="width: 100%" />
        </nz-upload>
      </nz-form-item>
      
      <div class="d-block">Description:</div>
      <nz-form-item>
        <nz-form-control [nzSm]="24" [nzXs]="24" nzHasFeedback nzErrorTip="Please input value!">
          <nz-textarea-count [nzMaxCharacterCount]="1000">
            <textarea rows="4" formControlName="description" nz-input></textarea>
          </nz-textarea-count>
        </nz-form-control>
      </nz-form-item>

      <div class="d-block">Eligiblity Criteria:</div>
      <nz-form-item>
        <nz-form-control nzHasFeedback nzErrorTip="Please input value!">
          <input nz-input id="city" formControlName="eligiblityCriteria" placeholder="Enter Criteria" />
        </nz-form-control>
      </nz-form-item>

      <div class="d-block">Loan Features:</div>
      <nz-form-item>
        <nz-form-control>
          <nz-select nzMode="tags" formControlName="loanFeatures" nzPlaceHolder="Add Loan Features">
            <nz-option *ngFor="let option of loanFeatureList" [nzLabel]="option.name" [nzValue]="option"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="7" [nzXs]="24" nzFor="facebook">Facebook URL</nz-form-label>
        <nz-form-control [nzSm]="17" [nzXs]="24" nzHasFeedback nzErrorTip="Please enter valid URL">
          <nz-input-group nzAddOnBeforeIcon="facebook" style="width: 100%">
            <input formControlName="facebookUrl" id="facebook" nz-input class="ant-input"
              placeholder="https://facebook.com/username" />
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="7" [nzXs]="24" nzFor="twitter">Twitter URL</nz-form-label>
        <nz-form-control [nzSm]="17" [nzXs]="24" nzHasFeedback nzErrorTip="Please enter valid URL">
          <nz-input-group nzAddOnBeforeIcon="twitter" style="width: 100%">
            <input formControlName="twitterUrl" id="twitter" nz-input class="ant-input"
              placeholder="https://twitter.com/username" />
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="7" [nzXs]="24" nzFor="instagram">Instagram URL</nz-form-label>
        <nz-form-control [nzSm]="17" [nzXs]="24" nzHasFeedback nzErrorTip="Please enter valid URL">
          <nz-input-group nzAddOnBeforeIcon="instagram" style="width: 100%">
            <input formControlName="instagramUrl" id="instagram" nz-input class="ant-input"
              placeholder="https://instagram.com/username" />
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="7" [nzXs]="24" nzFor="linkedin">Linkedin URL</nz-form-label>
        <nz-form-control [nzSm]="17" [nzXs]="24" nzHasFeedback nzErrorTip="Please enter valid URL">
          <nz-input-group nzAddOnBeforeIcon="linkedin" style="width: 100%">
            <input formControlName="linkedinUrl" id="linkedin" nz-input class="ant-input"
              placeholder="https://linkedin.com/in/username" />
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="8" [nzXs]="24">Enable / Disable</nz-form-label>
        <nz-form-control [nzSm]="16" [nzXs]="24">
          <nz-switch formControlName="isActive"></nz-switch>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="8" [nzXs]="24" nzTooltipTitle="Turn this on to acivate API">API Activated</nz-form-label>
        <nz-form-control [nzSm]="16" [nzXs]="24">
          <nz-switch formControlName="apiActivated"></nz-switch>
        </nz-form-control>
      </nz-form-item>

    </div>
  </div>

  <nz-divider nzText="Loan Types" nzOrientation="left"></nz-divider>
  <div nz-row>
    <div nz-col nzSpan="24">
      <nz-table>
        <thead>
          <tr>
            <th>Loan Type</th>
            <th>Min / Max Amount</th>
            <th>Interest</th>
            <th>Tenor</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td colspan="5">
              <button class="pull-right" type="button" nz-button nzType="primary" (click)="openLoanTypeForm()" nzTooltipTitle="Add Loan Type"
                nz-tooltip> <i nz-icon nzType="plus"></i> Add Loan Type</button>
            </td>
          </tr>
          <tr *ngFor="let item of lenderLoanTypes">
            <td>{{item.loanTypeName}}</td>
            <td>{{item.minimumLoanAmount}} / {{item.maximumLoanAmount}}</td>
            <td>{{item.averageInterestRate}}</td>
            <td>{{item.averageLoanTenor}}</td>
            <td>
              <button type="button" nz-button nzType="primary" (click)="openLoanTypeForm(item)" nzTooltipTitle="Update"
                nz-tooltip> <i nz-icon nzType="form"></i> </button>
                <nz-divider nzType="vertical"></nz-divider>

              <button type="button" nz-button nzDanger nzType="primary" nz-popconfirm
                nzPopconfirmTitle="Are you sure you want to delete this item: {{item?.loanTypeName}}?"
                (nzOnConfirm)="removeLoanType(item)" nzTooltipTitle="Delete" nz-tooltip [nzLoading]="loading"> <i
                  nz-icon nzType="delete"></i> </button>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </div>
  </div>

  <div nz-row>
    <div nz-col nzSpan="24">
      <br />
      <nz-form-item nz-row class="register-area">
        <button nz-button nzType="primary" [nzLoading]="loading">Submit</button>
      </nz-form-item>
    </div>
  </div>

</form>